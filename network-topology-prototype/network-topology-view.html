<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Topology View - Multi-Rack Infrastructure</title>
    <link rel="stylesheet" href="css/network-topology-view.css">
</head>
<body>
    <div class="header">
        <h1>ğŸŒ Network Topology View - Multi-Rack Infrastructure</h1>
        <p>Comprehensive view of interconnected network racks with drill-down capabilities</p>
        <div style="margin-top: 0.5rem; font-size: 0.85rem; opacity: 0.9;">
            <strong>Locations:</strong> Server Room â€¢ Gate-2C Security Room â€¢ 
            <strong>Data Source:</strong> rack2c.txt â€¢ 
            <strong>Fiber Backbone:</strong> 12-Core Fiber Infrastructure
        </div>
    </div>

    <div class="main-container">
        <!-- Topology Controls -->
        <div class="topology-controls">
            <div class="control-section">
                <h3>ğŸ›ï¸ Topology Controls</h3>
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="showAllConnections()">
                        ğŸ”— Show All Connections
                    </button>
                    <button class="btn btn-secondary" onclick="hideAllConnections()">
                        ğŸ‘ï¸ Hide Connections
                    </button>
                    <button class="btn btn-secondary" onclick="drawInterRackConnections()">
                        ğŸ”„ Redraw Connections
                    </button>
                    <button class="btn btn-secondary" onclick="toggleRackLabels()">
                        ğŸ·ï¸ Toggle Labels
                    </button>
                    <button class="btn btn-secondary" onclick="resetRackPositions()">
                        â†º Reset Positions
                    </button>
                    <button class="btn btn-success" onclick="exportTopology()">
                        ğŸ’¾ Export Topology
                    </button>
                </div>
            </div>
            
            <div class="rack-selector">
                <h4>ğŸ“ Rack Locations</h4>
                <div class="rack-list" id="rackList">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="connection-summary">
                <h4>ğŸ“Š Connection Summary</h4>
                <div id="connectionSummary">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Main Topology View -->
        <div class="topology-container">
            <div class="topology-canvas" id="topologyCanvas">
                <!-- Racks will be positioned here -->
                <div class="rack-node" id="rack-SR" data-rack-id="SR">
                    <div class="rack-header">
                        <h3>ğŸ¢ Server Room</h3>
                        <div class="rack-location">Main Data Center</div>
                    </div>
                    <div class="rack-preview">
                        <div class="device-preview liu">LIU 2 (24-Port Fiber Hub)</div>
                        <div class="device-preview switch">Core Distribution Switch</div>
                        <div class="device-preview server">Application Servers (3)</div>
                        <div class="device-preview ups">Dual UPS Systems</div>
                    </div>
                    <div class="rack-stats">
                        <span class="stat">ğŸ“Š 85% Utilized</span>
                        <span class="stat">ğŸ”— 12 Connections</span>
                    </div>
                    <div class="rack-actions">
                        <button class="btn-view-details" onclick="selectRack('SR')">
                            ğŸ” View Details
                        </button>
                    </div>
                </div>

                <div class="rack-node" id="rack-G2C" data-rack-id="G2C">
                    <div class="rack-header">
                        <h3>ğŸšª Gate 2C</h3>
                        <div class="rack-location">Security Room</div>
                    </div>
                    <div class="rack-preview">
                        <div class="device-preview liu">12-Core Fiber LIU</div>
                        <div class="device-preview switch">D-Link 1210-28P PoE</div>
                        <div class="device-preview patch-panel">24-Port Patch Panel</div>
                        <div class="device-preview wifi">D-Link WiFi AP</div>
                    </div>
                    <div class="rack-stats">
                        <span class="stat">ğŸ“Š 65% Utilized</span>
                        <span class="stat">ğŸ”— 8 Connections</span>
                    </div>
                    <div class="rack-actions">
                        <button class="btn-view-details" onclick="selectRack('G2C')">
                            ğŸ” View Details
                        </button>
                    </div>
                </div>

                <div class="rack-node" id="rack-G2B" data-rack-id="G2B">
                    <div class="rack-header">
                        <h3>ğŸšª Gate 2B</h3>
                        <div class="rack-location">Security Checkpoint</div>
                    </div>
                    <div class="rack-preview">
                        <div class="device-preview liu">Direct Fiber Interface</div>
                        <div class="device-preview switch">24-Port Access Switch</div>
                        <div class="device-preview cctv">4-Channel NVR</div>
                        <div class="device-preview generic">Access Control & Intercom</div>
                    </div>
                    <div class="rack-stats">
                        <span class="stat">ğŸ“Š 45% Utilized</span>
                        <span class="stat">ğŸ”— 6 Connections</span>
                    </div>
                    <div class="rack-actions">
                        <button class="btn-view-details" onclick="selectRack('G2B')">
                            ğŸ” View Details
                        </button>
                    </div>
                </div>

                <!-- Inter-rack connections will be drawn here -->
                <svg class="topology-connections" id="topologyConnections">
                    <!-- Connection lines will be drawn by JavaScript -->
                </svg>
            </div>
        </div>

        <!-- Rack Detail Panel -->
        <div class="rack-detail-panel" id="rackDetailPanel">
            <div class="panel-header">
                <h3 id="detailPanelTitle">Rack Details</h3>
                <button class="close-panel" onclick="closeDetailPanel()">âœ•</button>
            </div>
            
            <div class="panel-content" id="detailPanelContent">
                <div class="detail-section">
                    <h4>ğŸ“ Location Information</h4>
                    <div id="locationInfo">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>ğŸ”§ Equipment Summary</h4>
                    <div id="equipmentSummary">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>ğŸ”— Connections</h4>
                    <div id="connectionDetails">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="detail-actions">
                    <button class="btn btn-primary" onclick="drillDownToRack()">
                        ğŸ” Drill Down to Rack View
                    </button>
                    <button class="btn btn-secondary" onclick="showRackConnections()">
                        ğŸ”— Highlight Connections
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Connection Legend -->
    <div class="connection-legend" id="connectionLegend" style="display: none;">
        <button class="legend-close-btn" onclick="toggleLegend()">âœ•</button>
        <h4>ğŸ”— Connection Types</h4>
        <div class="legend-items">
            <div class="legend-item">
                <div class="legend-line fiber"></div>
                <span>Fiber Cable Bundle</span>
            </div>
            <div class="legend-item">
                <div class="legend-line ethernet"></div>
                <span>Ethernet Links</span>
            </div>
            <div class="legend-item">
                <div class="legend-line power"></div>
                <span>Power Feeds</span>
            </div>
            <div class="legend-item">
                <div class="legend-line management"></div>
                <span>Management Links</span>
            </div>
        </div>
        <div style="margin-top: 0.75rem; font-size: 0.7rem; color: #718096; text-align: center;">
            Thick cables with arrows show direction â€¢ Individual cores fan out at termination points
        </div>
    </div>

    <!-- Legend Toggle Button -->
    <button class="legend-toggle-btn" id="legendToggleBtn" onclick="toggleLegend()">
        ğŸ“– Legend
    </button>

    <script src="js/network-topology-view.js"></script>
</body>
</html>